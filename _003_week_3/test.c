#include <stdio.h>
#include<windows.h>
#include <conio.h>

#define LEFT 75  //왼쪽 방향키
#define RIGHT 77 //오른쪽 방향키
#define UP 72   //위쪽 방향키
#define DOWN 80 //아래 방향키
#define ARROW 224

void GotoXY(int x, int y) 
{
	COORD Pos;
	Pos.X = x;
	Pos.Y = y;
	SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), Pos);
}

int map[31][31] =
{
{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
{1,0,1,1,1,1,1,0,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,0,1,1,1,1,1,0,1},
{1,0,1,0,0,0,1,0,1,0,0,0,0,1,0,1,0,1,0,0,0,0,1,0,1,0,0,0,1,0,1},
{1,0,1,0,0,0,1,0,1,0,0,0,0,1,0,1,0,1,0,0,0,0,1,0,1,0,0,0,1,0,1},
{1,0,1,1,1,1,1,0,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,0,1,1,1,1,1,0,1},
{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
{1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1},
{1,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,1},
{1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1},
{1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1},
{1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1},
{0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0},
{0,0,0,0,0,0,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1,0,0,0,0,0,0},
{0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0},
{1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1},
{0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0},
{1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1},
{0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0},
{0,0,0,0,0,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0},
{0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0},
{1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1},
{1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1},
{1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1},
{1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1},
{1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1},
{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
};

int x = 0, y = 0;

 void main() {
	system("mode con: cols=62 lines=48");
	char ch;
	

	for (int i = 0; i < sizeof(map) / sizeof(map[31]); i++)
	{
		for (int j = 0; j < sizeof(map[31]) / sizeof(map[31][31]); j++)
		{
			ch = map[i][j];
			switch (ch)
			{
			case 0:
				printf("  ");
				break;
			case 1:
				printf("■");
				break;
			}
		}
	}
	GotoXY(x = 30, y = 20);
	printf("○");

	while (1) 
	{
		if (_kbhit())
		{
			int nkey = _getch();
			if (nkey == ARROW)
			{
				nkey = _getch();
				switch (nkey)
				{
				case UP:
					if (map[y - 1][x] == 0)
					{
						GotoXY(x, y);
						if (map[y - 1][x] == 0) printf("  ");
						GotoXY(x, y - 1);
						y -= 1;
						printf("○");
					}
					break;
				case LEFT:
					if(map[y][x / 2 + 1] == 0)
					{
						GotoXY(x, y);
						if (map[y][x / 2] == 0) printf("  ");
						GotoXY(x - 2, y);
						x -= 2;
						printf("○");
					}
					break;
				case RIGHT:
					if (map[y][x / 2 + 1] == 0)
					{
						GotoXY(x, y);
						if (map[y][x / 2] == 0) printf("  ");
						GotoXY(x + 2, y);
						x += 2;
						printf("○");
					}
					break;
				case DOWN:
					if (map[y + 1][x] == 0)
					{
						GotoXY(x, y);
						if (map[y + 1][x] == 0) printf("  ");
						GotoXY(x, y + 1);
						y += 1;
						printf("○");
					}
					break;
				}
			}
		}
	}
}

 void CursorView(char show)
 {
	 CONSOLE_CURSOR_INFO ConsoleCursor;
	 ConsoleCursor.bVisible = show;
	 ConsoleCursor.dwSize = 1;
	 SetConsoleCursorInfo(GetStdHandle(STD_OUTPUT_HANDLE), &ConsoleCursor);